!function(t){t.fn.clamp=function(n){var e=t.extend({clamp:2,splitOnChars:[".","-","–","—"," "],animate:!1,truncationChar:"…",truncationHTML:"",alwaysDisplay:!1},n);return this.each(function(){var n,r,a,l=t(this),i=(t(this).text(),e.clamp),u=e.splitOnChars.slice(0),h=u[0];function c(t,n){return getComputedStyle||(getComputedStyle=function(t,n){return this.el=t,this.getPropertyValue=function(n){var e=/(\-([a-z]){1})/g;return"float"==n&&(n="styleFloat"),e.test(n)&&(n=n.replace(e,function(){return arguments[2].toUpperCase()})),t.currentStyle&&t.currentStyle[n]?t.currentStyle[n]:null},this}),getComputedStyle(t,null).getPropertyValue(n)}function o(t,n){t.html(n+e.truncationChar)}e.truncationHTML&&((n=document.createElement("span")).innerHTML=e.truncationHTML),function(){var t,s,m=(s=i,"normal"==(t=c(l[0],"line-height"))&&(t=1.2*parseInt(c(l[0],"font-size"))),parseInt(t)*s);if(m<l.height())!function t(i,c){if(c){var s=i.html().replace(e.truncationChar,"");if(r||(h=u.length>0?u.shift():"",r=s.split(h)),r.length>1?(a=r.pop(),o(i,r.join(h))):r=null,n&&(i.html(i.html().replace(e.truncationChar,"")),l.html(i.html()+" "+n.innerHTML+e.truncationChar)),r){if(l.height()<=c){if(!(u.length>=0&&""!=h))return l.html();o(i,r.join(h)+h+a),r=null}}else""==h&&(o(i,""),u=e.splitOnChars.slice(0),h=u[0],r=null,a=null);if(!e.animate)return t(i,c);setTimeout(function(){t(i,c)},!0===e.animate?10:e.animate)}}(l,m);else if(l.html(l.html().replace(e.truncationChar,"")),e.alwaysDisplay){var p=n?n.innerHTML+e.truncationChar:e.truncationChar;l.html(l.html()+" "+p)}}()})}}(jQuery);